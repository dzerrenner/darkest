<!DOCTYPE html>
<html>
<head lang="en">
    <meta charset="UTF-8">
    <title>Darkest Dungeon Info</title>
    <link rel="stylesheet" href="scripts/lib/semantic-ui/semantic.css"/>
    <link rel="stylesheet" href="style.css"/>
    <link rel="shortcut icon" type="image/x-icon" href="favicon.ico"/>
</head>
<body class="site">
    <nav id="nav" class="ui fixed menu inverted navbar">
        <div class="ui mini image">
            <img src="images/indicator.png">
        </div>
        <a href="" class="brand item">Darkest Dungeon Info</a>
        <div id="heroes-dropdown" class="ui dropdown active link item">
            Heroes
            <i class="dropdown icon"></i>
            <div class="menu">
                <a class="item"><i class="edit icon"></i> Edit Profile</a>
                <a class="item"><i class="globe icon"></i> Choose Language</a>
                <a class="item"><i class="settings icon"></i> Account Settings</a>
            </div>
        </div>

        <!--
        <a href="" class="item">Features</a>
        <a href="" class="item">Contact</a>
        -->
        <div class="right menu">
            <div class="item">Upgrade:</div>
            <a class="ui item" data-bind="click: dec_level"><i class="chevron left icon"></i></a>
            <a class="ui item" data-bind="click: function() { select_level(0) }, css: { active: selected_level() === 0}">0</a>
            <a class="ui item" data-bind="click: function() { select_level(1) }, css: { active: selected_level() === 1}">1</a>
            <a class="ui item" data-bind="click: function() { select_level(2) }, css: { active: selected_level() === 2}">2</a>
            <a class="ui item" data-bind="click: function() { select_level(3) }, css: { active: selected_level() === 3}">3</a>
            <a class="ui item" data-bind="click: function() { select_level(4) }, css: { active: selected_level() === 4}">4</a>
            <a class="ui item" data-bind="click: inc_level"><i class="chevron right icon"></i></a>
            <div class="item">
                Version: <span class="ui purple horizontal label" data-bind="text: svn_revision">....</span>
            </div>
        </div>
    </nav>
    <div class="ui dimmable dimmed segment">
    <div id="main-dimmer" class="ui active page dimmer"><div class="ui text loader">Loading</div></div>
    <main id="main" class="ui page grid">
        <!--
        <div class="ui twelve wide centered column">
                <h1 class="ui header">
                    <img src="images/indicator.png">
                    <div class="content">
                        Darkest Dungeon Info
                        <div class="sub header">Inside view of the game data files.</div>
                    </div>
                </h1>
        </div>
        -->
        <div class="ui sixteen wide centered column" id="heroes">
            <h3 class="ui top attached header">
                Overview
            </h3>
            <div class="ui blue attached segment">
                <div class="ui five doubling cards" data-bind="foreach: heroes">
                    <div class="ui card" data-bind="css: { active: $data === $parent.selected_hero() }">
                        <div class="image">
                            <img data-bind="formatAttr: { attr: 'src', prefix: 'images/heroes/', value: $data.raw_name(), suffix: '_portrait_roster.png' }">
                        </div>
                        <div class="content">
                            <a class="header" data-bind="text: name"></a>
                            <div class="meta">
                                <span class="date" data-bind="text: tags"></span>
                            </div>
                            <div class="description">
                                <div class="ui three column grid">
                                    <div class="center aligned column">
                                        <div class="ui mini statistic">
                                            <div class="value"  data-bind="text: get_armour('hp')">
                                            </div>
                                            <div class="label">
                                                HP
                                            </div>
                                        </div>
                                    </div>
                                    <div class="center aligned column">
                                        <div class="ui mini statistic">
                                            <div class="value">
                                                <span data-bind="text: get_weapon('dmg').min"></span>-<span data-bind="text: get_weapon('dmg').max"></span>
                                            </div>
                                            <div class="label">
                                                SPD
                                            </div>
                                        </div>
                                    </div>
                                    <div class="center aligned column">
                                        <div class="ui mini statistic">
                                            <div class="value"  data-bind="text: get_armour('hp')">
                                            </div>
                                            <div class="label">
                                                DMG
                                            </div>
                                        </div>
                                    </div>
                                </div>
                                <div class="ui two column grid">
                                    <div class="center aligned column">
                                        <div class="ui mini statistic">
                                            <div class="value"  data-bind="text: get_weapon('crit')">
                                            </div>
                                            <div class="label">
                                                CRIT
                                            </div>
                                        </div>
                                    </div>
                                    <div class="center aligned column">
                                        <div class="ui mini statistic">
                                            <div class="value"  data-bind="text: get_armour('def')">
                                            </div>
                                            <div class="label">
                                                DEF
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div class="extra content">
                            <a class="details" data-bind="click: function() { show_modal('Resistances') }">
                                <i class="zoom icon"></i>
                                resistances
                            </a>
                            <a class="details" data-bind="click: function() { show_modal('Equipment') }">
                                <i class="zoom icon"></i>
                                equip
                            </a>
                            <a class="details" data-bind="click: function() { show_modal('Skills') }">
                                <i class="zoom icon"></i>
                                skills
                            </a>
                        </div>
                    </div>
                </div>
            </div>
            <div id="details" class="ui fullscreen modal">
                <i class="close icon"></i>
                <div class="header"><span data-bind="text: selected_hero().mode"></span>: <span data-bind="text: selected_hero().name"></span></div>
                <div class="content">
                    <div class="ui tiny image">
                        <img data-bind="formatAttr: { attr: 'src', prefix: 'images/heroes/', value: selected_hero().raw_name(), suffix: '_portrait_roster.png' }">
                    </div>
                    <div class="description">
                        <div class="ui eight column grid" data-bind="foreach: selected_hero().resistances">
                            <div class="column">
                                <div class="ui small statistic">
                                    <div class="value" data-bind="text: value"></div>
                                    <div class="label" data-bind="text: name"></div>
                                </div>
                            </div>
                        </div>

                    </div>
                </div>
            </div>
            <h3 class="ui top attached left header" data-bind="text: selected_hero().name"></h3>
            <div class="ui orange attached segment">
                <!--
                <div id="hero-sticky" class="ui left attached rail">
                    <div class="ui orange sticky">
                        <h3 class="ui header">Hero classes</h3>
                        <div class="ui vertical menu" data-bind="foreach: heroes">
                            <a class="item" data-bind="click: $parent.select_hero, css: { active: $data === $parent.selected_hero() }">
                                <span data-bind="text: name"></span>
                            </a>
                        </div>
                    </div>
                </div>
                -->
                <div class="ui top attached tabular menu" id="hero-tabs">
                    <a class="active item" data-tab="hero-core">Core data</a>
                    <a class="item" data-tab="hero-weapon-armour">Weapon / Armour</a>
                    <a class="item" data-tab="hero-skills">Skills</a>
                </div>
                <div class="ui bottom attached tab segment" data-tab="hero-core">
                    <!--
                    <div class="progbar ui progress" data-bind="attr: {'data-percent': selected_hero().getResistance('stun').value }">
                        <div class="bar"><div class="progress"></div></div>
                    </div>
                    <div class="progbar ui progress" data-bind="attr: {'data-percent': selected_hero().getResistance('disease').value }">
                        <div class="bar"><div class="progress"></div></div>
                    </div>
                    <div class="progbar ui progress" data-bind="attr: {'data-percent': selected_hero().getResistance('debuff').value }">
                        <div class="bar"><div class="progress"></div></div>
                    </div>
                    <div class="progbar ui progress" data-bind="attr: {'data-percent': selected_hero().getResistance('move').value }">
                        <div class="bar"><div class="progress"></div></div>
                    </div>
                    <div class="progbar ui progress" data-bind="attr: {'data-percent': selected_hero().getResistance('trap').value }">
                        <div class="bar"><div class="progress"></div></div>
                    </div>
                    <div class="progbar ui progress" data-bind="attr: {'data-percent': selected_hero().getResistance('poison').value }">
                        <div class="bar"><div class="progress"></div></div>
                    </div>
                    <div class="progbar ui progress" data-bind="attr: {'data-percent': selected_hero().getResistance('death_blow').value }">
                        <div class="bar"><div class="progress"></div></div>
                    </div>
                    <div class="progbar ui progress" data-bind="attr: {'data-percent': selected_hero().getResistance('bleed').value }">
                        <div class="bar"><div class="progress"></div></div>
                    </div>
                    -->
                    <!-- TODO: progress funktioniert nicht richtig -->
                </div>
                <div class="ui bottom attached tab segment" data-tab="hero-weapon-armour">
                    <table class="ui table">
                        <thead>
                        <tr>
                            <th>Weapon</th>
                            <th>Icon</th>
                            <th>ATK</th>
                            <th>SPD</th>
                            <th>DMG</th>
                            <th>CRIT</th>
                        </tr>
                        </thead>
                        <tbody  data-bind="foreach: selected_hero().weapon">
                        <tr>
                            <td data-bind="text: $index"></td>
                            <td><img style="width: 36px; height: 72px" data-bind="formatAttr: { attr: 'src', prefix: 'images/equip/', value: $data.icon }"></td>
                            <td data-bind="text: atk"></td>
                            <td data-bind="text: spd"></td>
                            <td><span data-bind="text: dmg.min"></span>-<span data-bind="text: dmg.max"></span></td>
                            <td data-bind="text: crit"></td>
                        </tr>
                        </tbody>
                    </table>
                    <table class="ui table">
                        <thead>
                        <tr>
                            <th>Armour</th>
                            <th>Icon</th>
                            <th>DEF</th>
                            <th>SPD</th>
                            <th>HP</th>
                            <th>PROT</th>
                        </tr>
                        </thead>
                        <tbody  data-bind="foreach: selected_hero().armour">
                        <tr>
                            <td data-bind="text: $index"></td>
                            <td><img style="width: 36px; height: 72px" data-bind="formatAttr: { attr: 'src', prefix: 'images/equip/', value: $data.icon }"></td>
                            <td data-bind="text: def"></td>
                            <td data-bind="text: spd"></td>
                            <td data-bind="text: hp"></td>
                            <td data-bind="text: prot"></td>
                        </tr>
                        </tbody>
                    </table>
                </div>
                <div class="ui bottom attached tab segment" data-tab="hero-skills">
                    <table class="ui table">
                        <thead>
                        <tr>
                            <th>Skill</th>
                            <th>Type</th>
                            <th>Level</th>
                            <th>Position</th>
                            <th>Target</th>
                            <th>DMG</th>
                            <th>CRIT</th>
                            <th>Move</th>
                            <th>Effects</th>
                        </tr>
                        </thead>
                        <tbody data-bind="foreach: selected_hero().skills">
                        <tr>
                            <td rowspan="5" data-bind="text: name"></td>
                            <td rowspan="5" data-bind="text: skills[0].type"></td>
                            <td>0</td>
                            <td data-bind="text: skills[0].launch"></td>
                            <td data-bind="text: skills[0].target"></td>
                            <td data-bind="text: skills[0].dmg"></td>
                            <td data-bind="text: skills[0].crit"></td>
                            <td data-bind="text: skills[0].move"></td>
                            <td data-bind="text: skills[0].effect"></td>
                        </tr>
                        <!-- ko foreach: skills.slice(1) -->
                        <tr>
                            <td data-bind="text: ($index() + 1)"></td>
                            <td data-bind="text: launch"></td>
                            <td data-bind="text: target"></td>
                            <td data-bind="text: $data.dmg"></td>
                            <td data-bind="text: $data.crit"></td>
                            <td data-bind="text: $data.move"></td>
                            <td data-bind="text: $data.effect"></td>
                        </tr>
                        <!-- /ko -->
                        </tbody>
                    </table>

                </div>
            </div>
        </div>
    </main>
    </div>
    <script src="scripts/lib/jquery-2.1.3.min.js"></script>
    <script src="scripts/lib/knockout-3.3.0.js"></script>
    <script src="scripts/lib/lodash.min.js"></script>
    <script src="scripts/lib/semantic-ui/semantic.min.js"></script>
    <script src="scripts/main.js"></script>
</body>
</html>